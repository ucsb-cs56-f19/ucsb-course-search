<h2>Courses</h2>

<style>
  tr.firstRowForCourse {
    border-top: solid black 2px;
  }

  tr.lastRowForCourse {
    border-bottom: solid black 2px;
  }

  tr.SECONDARY td.section {
    padding-left: 2em;
  }

  tr.SECONDARY td.enrollCode {
    padding-left: 2em;
  }

  tr.SECONDARY td.instructorList {
    padding-left: 2em;
  }

  #classModal {}

  .modal-body {
  overflow-x: auto;
  }
</style>

<table class="table">
  <thead>
    <tr>
      <th th:if="${quarters != null}">Quarter</th>
      <th>Course Id</th>
      <th>Title</th>
      <th>Section</th>
      <th>Instructor</th>
      <th>Enroll Cd</th>
      <th>Days</th>
      <th>Time</th>
      <th>Location</th>
      <th>Enrolled</th>
      <th>Capacity</th>
    </tr>
  </thead>
  <tbody>
    <div th:each="r: ${rows}">
      <tr
        th:class="(${r.firstRow} ? 'firstRowForCourse' : '') + ' ' + (${r.lastRow} ? 'lastRowForCourse' : '') + ' ' + ${r.rowType}">
        <td th:if="${quarters != null}" th:text="${r.rowType}=='PRIMARY' ? ${r.course.getQuarterQyy()} : '' "></td>
        <td th:text="${r.rowType}=='PRIMARY' ? ${r.course.courseId} : '' "></td>
        <td th:text="${r.rowType}=='PRIMARY' ? ${r.course.title} : '' "></td>
        <td class="section" th:text="${r.section.section}"></td>
        <td class="instructorList" th:text="${r.section.instructorList()}"></td>
        <td class="enrollCode" th:text="${r.section.enrollCode}"></td>
        <td th:text="${r.timeLocation?.days}"></td>
        <td th:text="${r.timeLocation == null} ? '' : ${r.timeLocation?.beginTime}+' - '+${r.timeLocation?.endTime}">
        </td>
        <td th:text="${r.timeLocation == null} ? '' : ${r.timeLocation?.building}+' '+${r.timeLocation?.room}"></td>
        <td th:text="${r.section.enrolledTotal}"></td>
        <td th:text="${r.section.maxEnroll}"></td>
        <div th:switch=${r.getRowType()}>
          <!--If data is for a lecture, draw this.-->
          <div th:case="'PRIMARY'">
            <td> <button type="submit" class="btn btn-primary" data-toggle="modal"
                th:attr="data-target='#' + ${r.course.getCourseKey()}" ; id="course-detail-btn">Details</button> </td>
          </div>
          <div th:case="'SECONDARY'">
            <!--If the data is for a class section, draw this.-->
            <td></td>
            <td> <!--This is where the form to add courses is placed.-->
              <form action="#" th:action="@{/courseschedule/add}" th:object="${r.course}" method="post">
                <!-- name attributes below are for the th:object which is an instance of 
                                   the @Entity that is a parameter of the controller endpoint for 
                                   the th:action above.  th:value values are computed based on the
                                   objects being iterated over passed into this view -->
                <input type="hidden" name="classname" th:value="${r.course.courseId} " value="" />
                <input type="hidden" name="enrollCode" th:value="${r.section.enrollCode} " value="" />
                <input type="hidden" name="uid" th:value="${id}" value="1000" />
                <input type="hidden" name="professor" th:value="${r.course.mainInstructorList()}" value="" />
                <input type="hidden" name="meettime" th:value="${r.section.meetTime()}"  value="" />
                <input type="hidden" name="meetday" th:value="${r.section.meetDay()}" value="" />
                <input type="hidden" name="location" th:value="${r.section.location()}" value="" />
                <input type="hidden" name="quarter" th:value="${r.course.getQuarterQyy()}" value="" />
                <input type="submit" class="btn btn-primary" value="Add" />
              </form>
            </td>
          </div>
        </div>
      </tr>
  </tbody>
</table>
<div th:replace="fragments/course_details_modal.html"></div>